# clash
mode: rule
mixed-port: 7897
socks-port: 7898
port: 7899
allow-lan: false
log-level: info
ipv6: true
external-controller: 127.0.0.1:9097
secret: ""
external-ui: ui
find-process-mode: strict
tcp-concurrent: true
unified-delay: false

geodata-mode: true
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
  asn: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"

external-ui-url: https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip
dns:
  enable: true
  listen: "0.0.0.0:1053"
  enhanced-mode: "fake-ip"
  fake-ip-range: "198.18.0.1/16"
  fake-ip-filter-mode: "blacklist"
  prefer-h3: false
  respect-rules: true
  use-hosts: false
  use-system-hosts: false
  ipv6: false
  fake-ip-filter:
    - "+.lan"
    - "+.local"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "localhost.ptlogin2.qq.com"
    - "localhost.sec.qq.com"
    - "+.in-addr.arpa"
    - "+.ip6.arpa"
    - "time.*.com"
    - "time.*.gov"
    - "pool.ntp.org"
    - "localhost.work.weixin.qq.com"
  default-nameserver:
    - "223.5.5.5"
    - "1.2.4.8"
  nameserver:
    - "https://208.67.222.222/dns-query"
    - "https://77.88.8.8/dns-query"
    - "https://1.1.1.1/dns-query"
    - "https://8.8.4.4/dns-query"
  direct-nameserver-follow-policy: false
  fallback-filter:
    geoip: true
    geoip-code: "CN"
    ipcidr:
      - "240.0.0.0/4"
      - "0.0.0.0/32"
    domain:
      - "+.google.com"
      - "+.facebook.com"
      - "+.youtube.com"
  fallback: []
  proxy-server-nameserver:
    - "https://223.5.5.5/dns-query"
    - "https://doh.pub/dns-query"
  direct-nameserver:
    - "https://223.5.5.5/dns-query"
    - "https://doh.pub/dns-query"
  nameserver-policy:
    geosite:private,cn:
      - "https://223.5.5.5/dns-query"
      - "https://doh.pub/dns-query"
global-client-fingerprint: chrome
profile:
  store-fake-ip: true
  store-selected: true
sniffer:
  enable: true
  skip-domain:
    - +.push.apple.com
  sniff:
    HTTP:
      override-destination: true
      ports:
        - 80
        - 8080-8880
    QUIC:
      ports:
        - 443
        - 8443
    TLS:
      ports:
        - 443
        - 8443
tun:
  auto-detect-interface: true
  auto-redirect: true
  auto-route: true
  dns-hijack:
    - any:53
  enable: true
  stack: mixed
  device: Meta
  strict-route: false
  mtu: 1500
rules:
  - DOMAIN-SUFFIX,time.windows.com,DIRECT
  - GEOSITE,category-ads-all,REJECT
  - GEOIP,telegram,默认代理,no-resolve
  - GEOIP,cloudflare,默认代理,no-resolve
  - GEOIP,facebook,默认代理,no-resolve
  - GEOIP,google,默认代理,no-resolve
  - GEOIP,netflix,默认代理,no-resolve
  - GEOIP,twitter,默认代理,no-resolve

  - GEOSITE,category-ai-!cn,默认代理
  - GEOSITE,spotify,默认代理
  - GEOSITE,github,默认代理
  - GEOSITE,telegram,默认代理
  - GEOSITE,twitter,默认代理
  - GEOSITE,google,默认代理
  - GEOSITE,wikimedia,默认代理
  - GEOSITE,category-social-media-!cn,默认代理
  - GEOSITE,category-anticensorship,默认代理

  - GEOSITE,category-dev-cn,DIRECT
  - GEOSITE,bing,DIRECT
  - GEOSITE,microsoft@cn,DIRECT
  - GEOSITE,microsoft,DIRECT
  - GEOSITE,tencent,DIRECT
  - GEOSITE,baidu,DIRECT
  - GEOSITE,alibaba,DIRECT
  - GEOSITE,wps,DIRECT
  - GEOSITE,zhihu,DIRECT
  - GEOSITE,jetbrains,默认代理
  - GEOSITE,docker,DIRECT
  - GEOSITE,geolocation-cn,DIRECT

  - GEOIP,lan,DIRECT,no-resolve
  - GEOIP,CN,DIRECT,no-resolve
  - GEOSITE,cn,DIRECT
  - MATCH,默认代理
